<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ST-DBSCAN Analysis</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        button:hover:not(:disabled) {
            background-color: #0056b3;
        }

        .accordion {
            margin: 20px;
        }

        .accordion h3 {
            cursor: pointer;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .accordion-content {
            display: none;
            padding: 10px;
        }

        .regents {
            max-width: 50%;
            height: auto;
            display: block;
            margin: 0 auto;
            border: 5px solid #ccc;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        img.compressed {
            max-width: 50%;
            height: 400px;
            display: block;
            margin: 0 auto;
            border: 5px solid #ccc;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
        }
        h2, h3 {
            color: #007BFF;
        }

        footer {
            text-align: center;
            margin-top: 20px;
        }

        .label {
            text-align: center;
            font-size: 16px;
            margin-top: 10px;
            font-weight: bold;
        }
        .iframe-container {
            display: flex;
            justify-content: center;
            gap: 20px; /* Abstand zwischen den iFrames */
        }
        .iframe-item {
            text-align: center;
        }
        .iframe-item p {
            font-size: 14px;
            color: #555;
        }
    </style>
</head>
<body>
<div style="display: flex; align-items: center; justify-content: space-between;">
    <button onclick="goBack()" style="margin: 10px;">Back to Analysis</button>
    <h1>3.2 STDBSCAN Analysis</h1>
    <div style="width: 80px;"></div>
</div>

<section><hr class="border-line" color="#007BFF"></section>

<section id="STDBSCAN">
    <h2 style="text-align: center;">Spatio-Temporal Density-Based Spatial Clustering (ST-DBSCAN)</h2>
    <p style="text-align: justify; margin: 10px 20px; padding: 10px; font-size: 18px">
        The Spatio-Temporal Density-Based Spatial Clustering of Applications with Noise (ST-DBSCAN), is a clustering algorithm that integrates both spatial and temporal dimensions.
        Applied to London’s movement data with the predefined time intervals, ST-DBSCAN was used in this project to identify patterns across the different time intervals.
        Three specific examples were selected to demonstrate how movement clusters manifest in different types of urban areas.
    </p>
    <p style="text-align: justify; margin: 10px 20px; padding: 10px;">
        A button interface enables navigation through the selected time intervals, which allows the visualisation of movement patterns in the different locations. Each interval spans 20 days, which was done to maintain computational feasibility. The analysis focused on three areas: Greenwich, Westminster, and Regent's Park with the London Zoo. A spatial search radius of 66 meters was employed to detect clusters. Despite hardware limitations that restricted extensive parameter testing, several effective clusters were identified, that will be explained in the following.
    </p>

    <div class="accordion">
        <h3 onclick="toggleAccordion('content1')">
            <span style="margin-right: 8px;">&#x25B6;</span> Westminster
        </h3>
        <div id="content1" class="accordion-content">
            <div style="text-align: center;">
                <img id="image-westminster" class="compressed" src="../data/img/westminster_1.png" alt="Westminster">
                <div id="label-westminster" class="label">Pre Corona</div>
            </div>
            <div class="button-container">
                <button id="prev-westminster" onclick="changeImage('westminster', -1)" disabled>← Previous</button>
                <button id="next-westminster" onclick="changeImage('westminster', 1)">Next →</button>
            </div>
            <div>
                <p style="text-align: justify;">
                    <strong>Westminster Area:</strong> This example covers Westminster with the Thames River at its center. Movement is concentrated along the bridges, which form clusters at the entry points, where people cross the river.

                    Before COVID-19, clusters were spread throughout the area, especially near sightseeing spots like Big Ben and Waterloo. During the summer, with fewer restrictions, the number of clusters decreased but remained around tourist sites and Waterloo. During the strictest restrictions, there was a noticeable reduction in clusters, with only slight activity at the bridges and tourist spots, which is unusual for a busy area like Westminster.
                </p>
            </div>
        </div>
        <section><hr class="border-line" color="#007BFF"></section>
    </div>

    <div class="accordion">
        <h3 onclick="toggleAccordion('content2')">
            <span style="margin-right: 8px;">&#x25B6;</span> Greenwich
        </h3>
        <div id="content2" class="accordion-content">
            <div style="text-align: center;">
                <img id="image-greenwich" class="compressed" src="../data/img/Greenwich_3.png" alt="Greenwich">
                <div id="label-greenwich" class="label">Return to relaxing restrictions</div>
            </div>
            <div class="button-container">
                <button id="prev-greenwich" onclick="changeImage('greenwich', -1)" disabled>← Previous</button>
                <button id="next-greenwich" onclick="changeImage('greenwich', 1)">Next →</button>
            </div>
            <div>
                <p style="text-align: justify;">
                    <strong>Greenwich Area:</strong> This example covers a section of Greenwich, including the A200 main road, the Thames River, and Greenwich Park. During the summer months with relaxed restrictions, movement patterns were more consistent. In the winter months with stricter conditions, movement along the streets, especially the main roads, decreased as fewer people commuted.

                    The Thames River also showed less activity due to the absence of tourist boats. In contrast, Greenwich Park maintained steady levels of movement across different periods, indicating its continued use as an outdoor space despite the changing restrictions.

                </p>
            </div>
        </div>
        <section><hr class="border-line" color="#007BFF"></section>
    </div>

    <div class="accordion">
        <h3 onclick="toggleAccordion('content3')">
            <span style="margin-right: 8px;">&#x25B6;</span> Regent's Park (London Zoo)
        </h3>
        <div id="content3" class="accordion-content">
            <div style="text-align: center;">
                <img id="image-zoo" class="compressed regents" src="../data/img/Zoo_1.png" alt="Zoo">
                <div id="label-zoo" class="label">Pre Corona</div>
            </div>
            <div class="button-container">
                <button id="prev-zoo" onclick="changeImage('zoo', -1)" disabled>← Previous</button>
                <button id="next-zoo" onclick="changeImage('zoo', 1)">Next →</button>
            </div>
            <div>
                <p style="text-align: justify;">
                    <strong>London Zoo:</strong> The <em>ST-DBSCAN results for the London Zoo</em> shows changes in visitor movement patterns across different time intervals. Before the pandemic, clusters indicate normal visitor activity. During the lockdown periods, all clusters disappear, reflecting the zoo's closure. This absence of activity contrasts with the surrounding areas, which still show some movement.

                    As restrictions were eased, the zoo reopened with guidelines, leading to a return of clusters within its area.

                </p>
            </div>
        </div>
        <section><hr class="border-line" color="#007BFF"></section>
    </div>
</section>

<section><hr class="border-line" color="#007BFF"></section>

<section style="text-align: center; font-size: 18px;">
    <h3 style="color: #007BFF;">Limitations</h3>
    <p style="text-align: justify; margin: 10px 20px; padding: 10px;">
        The calculations required a very high computational effort. Even with powerful hardware, a single run took many hours to complete. This initially limited the ability to perfectly optimize the parameter selection. However, after extensive experimentation, the parameters have been improved to the point where clear clusters are now visible.    It is important to note that the intervals were not fully processed. Only 20 days from each interval were analysed. This was necessary due to the otherwise overwhelming computational demands.</p>
    <p style="text-align: justify; margin: 10px 20px; padding: 10px;">
        Originally, there were significant challenges with distortions in the results. The search radius was previously specified in WGS84, which resulted in lat/lon distortions. Additionally, the high computational complexity initially prevented the calculations from being performed using metric coordinates. However, this has now been achieved, leading to improved results. Since then, the findings have been revised accordingly.

    <figure>
        <img src="../data/img/limitationsstdbscan.png" alt="Description of the image" style="width:400px; height:400px;">
        <figcaption>An excerpt of the full map where DBSCAN does not function correctly due to transition issues, and therefore is not utilized</figcaption>
    </figure>

    <section><hr class="border-line" color="#007BFF" width="60%"></section>
    <h3 style="color: #007BFF;">Greater London Area Heatmap</h3>
    <p>        The heatmaps for the entire London area, which cover both the pre-Corona interval and the first lockdown, can now be analysed below. The clusters can be best seen at a certain zoom level, rather than when fully zoomed out.    </p>
    </p>

    <div class="iframe-container">
        <div class="iframe-item">
            <iframe id="map1" src="../data/STDBSCAN/Combined_Heatmap_Interval_20_40_eps2_0.001.html" width="400px" height="500px"></iframe>
            <p>Pre Corona</p>
        </div>
        <div class="iframe-item">
            <iframe id="map2" src="../data/STDBSCAN/Combined_Heatmap_Interval_100_120_eps2_0.001.html" width="400px" height="500px"></iframe>
            <p>First Lockdown</p>
        </div>
    </div>


</section>

<section><hr class="border-line" color="#007BFF"></section>

<section id="STDBSCAN-summary" style="text-align: center; font-size: 18px;">
    <h3 style="color: #007BFF;">Summary of Results</h3>
    <p style="text-align: justify; margin: 10px 20px; padding: 10px;">
        The ST-DBSCAN analysis showed how movement patterns in specific locations in London changed with social restrictions. Regent’s Park remained active, which highlights its use as a place for leisure time activity. In contrast, the London Zoo showed no activity during closures due to the impact of tourism restrictions. In Greenwich, reduced movement along main roads and the Thames points to less commuting, while stable activity in the park implies consistent leisure activity. In Westminster, there was a noticeable decline in tourism and public gatherings.    </p>
</section>

<section><hr class="border-line" color="#007BFF"></section>

<div style="text-align: center; margin-top: 20px; margin-bottom: 20px;">
    <button onclick="goBack()"
            style="padding: 10px 20px; font-size: 16px; background-color: #007BFF; color: white; border: none; border-radius: 5px; cursor: pointer;">
        Back to Analysis
    </button>
</div>

<section><hr class="border-line" color="#007BFF"></section>

<footer id="imprint">
    <h3>Imprint</h3>
    <p>
        Created by <a href="https://github.com/tkrumrei">tkrumrei</a>,
        <a href="https://github.com/LHesse-UM">LHesse-UM</a>,
        <a href="https://github.com/tlehman1">tlehman1</a> |
        <a href="https://github.com/tkrumrei/StudyProject2024">GitHub Repository</a>
    </p>
</footer>

<script>
    const imageSets = {
        westminster: {
            images: [
                '../data/img/westminster_1.png',
                '../data/img/westminster_3.png',
                '../data/img/westminster_6.png'
            ],
            intervals: [
                "Pre Corona",
                "Return to relaxing restrictions",
                "Four Tier System"
            ]
        },
        greenwich: {
            images: [
                '../data/img/Greenwich_3.png',
                '../data/img/Greenwich_6.png'
            ],
            intervals: [
                "Return to relaxing restrictions",
                "Four Tier System"
            ]
        },
        zoo: {
            images: [
                '../data/img/Zoo_1.png',
                '../data/img/Zoo_2.png',
                '../data/img/Zoo_3.png'
            ],
            intervals: [
                "Pre Corona",
                "First Lockdown",
                "Return to relaxing restrictions"
            ]
        }
    };

    const currentIndexes = {
        westminster: 0,
        greenwich: 0,
        zoo: 0
    };

    function changeImage(section, step) {
        const set = imageSets[section];
        const currentIndex = currentIndexes[section];
        let newIndex = currentIndex + step;
        if (newIndex >= 0 && newIndex < set.images.length) {
            currentIndexes[section] = newIndex;
            document.getElementById(`image-${section}`).src = set.images[newIndex];
            document.getElementById(`label-${section}`).textContent = set.intervals[newIndex];
            document.getElementById(`prev-${section}`).disabled = (newIndex === 0);
            document.getElementById(`next-${section}`).disabled = (newIndex === set.images.length - 1);
        }
    }

    function toggleAccordion(contentId) {
        const allContents = document.querySelectorAll('.accordion-content');
        const allIcons = document.querySelectorAll('.accordion h3 span');
        allContents.forEach(content => content.style.display = 'none');
        allIcons.forEach(icon => icon.textContent = '\u25B6');
        const content = document.getElementById(contentId);
        const icon = content.previousElementSibling.querySelector('span');
        if (content.style.display === 'none') {
            content.style.display = 'block';
            icon.textContent = '\u25BC';
        }
    }

    function goBack() {
        window.location.href = "../index.html#STDBSCAN";
    }
</script>
</body>
</html>
